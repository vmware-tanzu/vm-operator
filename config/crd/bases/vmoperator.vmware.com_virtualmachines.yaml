
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.2.9
  creationTimestamp: null
  name: virtualmachines.vmoperator.vmware.com
spec:
  group: vmoperator.vmware.com
  names:
    kind: VirtualMachine
    listKind: VirtualMachineList
    plural: virtualmachines
    shortNames:
    - vm
    singular: virtualmachine
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: VirtualMachine is the Schema for the virtualmachines API. A VirtualMachine
        represents the desired specification and the observed status of a VirtualMachine
        instance.  A VirtualMachine is realized by the VirtualMachine controller on
        a backing Virtual Infrastructure provider such as vSphere.
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: VirtualMachineSpec defines the desired state of a VirtualMachine
          properties:
            advancedOptions:
              description: AdvancedOptions describes a set of optional, advanced options
                for configuring a VirtualMachine
              properties:
                changeBlockTracking:
                  description: ChangeBlockTracking specifies the enablement of incremental
                    backup support for this VirtualMachine, which can be utilized
                    by external backup systems such as VMware Data Recovery.
                  type: boolean
                defaultVolumeProvisioningOptions:
                  description: DefaultProvisioningOptions specifies the provisioning
                    type to be used by default for VirtualMachine volumes exclusively
                    owned by this VirtualMachine. This does not apply to PersistentVolumeClaim
                    volumes that are created and managed externally.
                  properties:
                    eagerZeroed:
                      description: EagerZeroed specifies whether to use eager zero
                        provisioning for the VirtualMachineVolume. An eager zeroed
                        thick disk has all space allocated and wiped clean of any
                        previous contents on the physical media at creation time.
                        Such disks may take longer time during creation compared to
                        other disk formats. EagerZeroed is only applicable if ThinProvisioned
                        is false. This is validated by the webhook.
                      type: boolean
                    thinProvisioned:
                      description: ThinProvisioned specifies whether to use thin provisioning
                        for the VirtualMachineVolume. This means a sparse (allocate
                        on demand) format with additional space optimizations.
                      type: boolean
                  type: object
              type: object
            className:
              description: ClassName describes the name of a VirtualMachineClass that
                is to be used as the overlayed resource configuration of VirtualMachine.  A
                VirtualMachineClass is used to further customize the attributes of
                the VirtualMachine instance.  See VirtualMachineClass for more description.
              type: string
            imageName:
              description: ImageName describes the name of a VirtualMachineImage that
                is to be used as the base Operating System image of the desired VirtualMachine
                instances.  The VirtualMachineImage resources can be introspected
                to discover identifying attributes that may help users to identify
                the desired image to use.
              type: string
            networkInterfaces:
              description: NetworkInterfaces describes a list of VirtualMachineNetworkInterfaces
                to be configured on the VirtualMachine instance. Each of these VirtualMachineNetworkInterfaces
                describes external network integration configurations that are to
                be used by the VirtualMachine controller when integrating the VirtualMachine
                into one or more external networks.
              items:
                description: VirtualMachineNetworkInterface defines the properties
                  of a network interface to attach to a VirtualMachine instance.  A
                  VirtualMachineNetworkInterface describes network interface configuration
                  that is used by the VirtualMachine controller when integrating the
                  VirtualMachine into a VirtualNetwork.  Currently, only NSX-T and
                  vSphere Distributed Switch (VDS) type network integrations are supported
                  using this VirtualMachineNetworkInterface structure.
                properties:
                  ethernetCardType:
                    description: EthernetCardType describes an optional ethernet card
                      that should be used by the VirtualNetworkInterface (vNIC) associated
                      with this network integration.  The default is "vmxnet3".
                    type: string
                  networkName:
                    description: NetworkName describes the name of an existing virtual
                      network that this interface should be added to.  For NSX-T networks,
                      this is the name of a pre-existing NSX-T VirtualNetwork.
                    type: string
                  networkType:
                    description: NetworkType describes the type of VirtualNetwork
                      that is referenced by the NetworkName.  Currently, the only
                      supported NetworkTypes are "nsx-t" and "vsphere-distributed".
                    type: string
                  providerRef:
                    description: ProviderRef is reference to a network interface provider
                      object that specifies the network interface configuration. If
                      unset, default configuration is assumed.
                    properties:
                      apiGroup:
                        description: APIGroup is the group for the resource being
                          referenced.
                        type: string
                      apiVersion:
                        description: API version of the referent.
                        type: string
                      kind:
                        description: Kind is the type of resource being referenced
                        type: string
                      name:
                        description: Name is the name of resource being referenced
                        type: string
                    required:
                    - apiGroup
                    - kind
                    - name
                    type: object
                required:
                - networkName
                type: object
              type: array
            ports:
              description: Ports is currently unused and can be considered deprecated.
              items:
                description: VirtualMachinePort is unused and can be considered deprecated.
                properties:
                  ip:
                    type: string
                  name:
                    type: string
                  port:
                    type: integer
                  protocol:
                    description: Protocol defines network protocols supported for
                      things like container ports.
                    type: string
                required:
                - ip
                - name
                - port
                - protocol
                type: object
              type: array
            powerState:
              description: PowerState describes the desired power state of a VirtualMachine.  Valid
                power states are "poweredOff" and "poweredOn".
              type: string
            readinessProbe:
              description: ReadinessProbe describes a network probe that can be used
                to determine if the VirtualMachine is available and responding to
                the probe.
              properties:
                tcpSocket:
                  description: TCPSocket specifies an action involving a TCP port.
                  properties:
                    host:
                      description: Host is an optional host name to connect to.  Host
                        defaults to the VirtualMachine IP.
                      type: string
                    port:
                      anyOf:
                      - type: integer
                      - type: string
                      description: Port specifies a number or name of the port to
                        access on the VirtualMachine. If the format of port is a number,
                        it must be in the range 1 to 65535. If the format of name
                        is a string, it must be an IANA_SVC_NAME.
                      x-kubernetes-int-or-string: true
                  required:
                  - port
                  type: object
                timeoutSeconds:
                  description: TimeoutSeconds specifies a number of seconds after
                    which the probe times out. Defaults to 10 seconds. Minimum value
                    is 1.
                  format: int32
                  type: integer
              type: object
            resourcePolicyName:
              description: ResourcePolicyName describes the name of a VirtualMachineSetResourcePolicy
                to be used when creating the VirtualMachine instance.
              type: string
            storageClass:
              description: StorageClass describes the name of a StorageClass that
                should be used to configure storage-related attributes of the VirtualMachine
                instance.
              type: string
            vmMetadata:
              description: VmMetadata describes any optional metadata that should
                be passed to the Guest OS.
              properties:
                configMapName:
                  description: ConfigMapName describes the name of the ConfigMap,
                    in the same Namespace as the VirtualMachine, that should be used
                    for VirtualMachine metadata.  The contents of the Data field of
                    the ConfigMap is used as the VM Metadata. The format of the contents
                    of the VM Metadata are not parsed or interpreted by the VirtualMachine
                    controller.
                  type: string
                transport:
                  description: Transport describes the name of a supported VirtualMachineMetadata
                    transport protocol.  Currently, the only supported transport protocols
                    are "ExtraConfig" and "OvfEnv".
                  type: string
              type: object
            volumes:
              description: Volumes describes the list of VirtualMachineVolumes that
                are desired to be attached to the VirtualMachine.  Each of these volumes
                specifies a volume identity that the VirtualMachine controller will
                attempt to satisfy, potentially with an external Volume Management
                service.
              items:
                description: VirtualMachineVolume describes a Volume that should be
                  attached to a specific VirtualMachine. Only one of PersistentVolumeClaim,
                  VsphereVolume should be specified.
                properties:
                  name:
                    description: Name specifies the name of the VirtualMachineVolume.  Each
                      volume within the scope of a VirtualMachine must have a unique
                      name.
                    type: string
                  persistentVolumeClaim:
                    description: PersistentVolumeClaim represents a reference to a
                      PersistentVolumeClaim in the same namespace. The PersistentVolumeClaim
                      must match a persistent volume provisioned (either statically
                      or dynamically) by the cluster's CSI provider.
                    properties:
                      claimName:
                        description: 'ClaimName is the name of a PersistentVolumeClaim
                          in the same namespace as the pod using this volume. More
                          info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#persistentvolumeclaims'
                        type: string
                      readOnly:
                        description: Will force the ReadOnly setting in VolumeMounts.
                          Default false.
                        type: boolean
                    required:
                    - claimName
                    type: object
                  storagePolicyID:
                    description: Storage Policy Based Management (SPBM) profile ID
                      associated with the StoragePolicyName. This currently only applies
                      to volumes with VsphereVolumeSource. Volumes with PersistentVolumeClaimVolumeSource
                      have their storage policy ID specified in the PersistentVolume
                      spec.
                    type: string
                  storagePolicyName:
                    description: Storage Policy Based Management (SPBM) profile name.
                      This currently only applies to volumes with VsphereVolumeSource.
                      Volumes with PersistentVolumeClaimVolumeSource have their storage
                      policy name specified in the PersistentVolume spec.
                    type: string
                  vSphereVolume:
                    description: VsphereVolume represents a reference to a VsphereVolumeSource
                      in the same namespace. Only one of PersistentVolumeClaim or
                      VsphereVolume can be specified. This is enforced via a webhook
                    properties:
                      capacity:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: A description of the virtual volume's resources
                          and capacity
                        type: object
                      deviceKey:
                        description: Device key of vSphere disk.  Empty deviceKey
                          means it should be created in vSphere.
                        type: integer
                    type: object
                required:
                - name
                type: object
              type: array
          required:
          - className
          - imageName
          - powerState
          type: object
        status:
          description: VirtualMachineStatus defines the observed state of a VirtualMachine
            instance.
          properties:
            biosUUID:
              description: BiosUUID describes a unique identifier provided by the
                underlying infrastructure provider that is exposed to the Guest OS
                BIOS as a unique hardware identifier.
              type: string
            changeBlockTracking:
              description: ChangeBlockTracking describes the CBT enablement status
                on the VirtualMachine.
              type: boolean
            conditions:
              description: Conditions describes the current condition information
                of the VirtualMachine.
              items:
                description: VirtualMachineCondition contains condition information
                  for a VirtualMachine.
                properties:
                  lastTransitionTime:
                    description: The last time the condition transitioned from one
                      status to another.
                    format: date-time
                    type: string
                  message:
                    description: Human-readable message indicating details about last
                      transition.
                    type: string
                  reason:
                    description: Unique, one-word, CamelCase reason for the condition's
                      last transition.
                    type: string
                  status:
                    description: Status of the condition, one of ('True', 'False',
                      'Unknown').
                    type: string
                  type:
                    description: Type of the condition.
                    type: string
                required:
                - status
                - type
                type: object
              type: array
            host:
              description: Host describes the hostname or IP address of the infrastructure
                host that the VirtualMachine is executing on.
              type: string
            phase:
              description: Phase describes the current phase information of the VirtualMachine.
              type: string
            powerState:
              description: PowerState describes the current power state of the VirtualMachine.
              type: string
            uniqueID:
              description: UniqueID describes a unique identifier that is provided
                by the underlying infrastructure provider, such as vSphere.
              type: string
            vmIp:
              description: VmIp describes the IP address of the VirtualMachine.  Currently,
                a VirtualMachine only supports a single network interface and interface
                address.
              type: string
            volumes:
              description: Volumes describes a list of current status information
                for each Volume that is desired to be attached to the VirtualMachine.
              items:
                description: VirtualMachineVolumeStatus defines the observed state
                  of a VirtualMachineVolume instance.
                properties:
                  attached:
                    description: Attached represents whether a volume has been successfully
                      attached to the VirtualMachine or not.
                    type: boolean
                  diskUUID:
                    description: DiskUuid represents the underlying virtual disk UUID
                      and is present when attachment succeeds.
                    type: string
                  error:
                    description: Error represents the last error seen when attaching
                      or detaching a volume.  Error will be empty if attachment succeeds.
                    type: string
                  name:
                    description: Name is the the name of the volume in a VirtualMachine.
                    type: string
                required:
                - attached
                - diskUUID
                - error
                - name
                type: object
              type: array
          required:
          - biosUUID
          - host
          - phase
          - powerState
          - uniqueID
          - vmIp
          type: object
      type: object
  version: v1alpha1
  versions:
  - name: v1alpha1
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
